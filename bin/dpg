#!/usr/bin/env python3

import argparse
from dpg.generic import GenericGenerator
from dpg.google import GoogleGenerator

GENERIC_GENERATOR = "generic"
GOOGLE_GENERATOR = "google"


def main():
    p = argparse.ArgumentParser()
    p.add_argument(
        '-g', '--generator',
        choices=[GENERIC_GENERATOR, GOOGLE_GENERATOR],
        default=GENERIC_GENERATOR,
        help='To be done...'
    )

    p.add_argument(
        '-u', '--username',
        required=True,
        help='To be done...'
    )

    p.add_argument(
        '-s', '--service',
        required=True,
        help='To be done...'
    )

    p.add_argument(
        '-c', '--counter',
        type=int, default=0,
        help='To be done...'
    )

    args = p.parse_args()

    if args.generator == GENERIC_GENERATOR:
        g = GenericGenerator()
    elif args.generator == GOOGLE_GENERATOR:
        g = GoogleGenerator()
    else:
        raise Exception()

    g.username = args.username
    g.service = args.service
    g.counter = args.counter

    password = g.generate()

    if password:
        print('[+] Your password is: %s' % password)


if __name__ == '__main__':
    main()
